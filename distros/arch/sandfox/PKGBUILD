# Maintainer: IgnorantGuru http://igurublog.wordpress.com/contact-ignorantguru/
pkgname=sandfox
pkgver=20130303
pkgrel=1
pkgdesc="Runs Firefox and other apps in a sandbox with limited access to the filesystem"
arch=(any)
license=('GPL3')
url=("http://igurublog.wordpress.com/downloads/script-$pkgname/")
depends=('inotify-tools')
_gitroot="git://github.com/IgnorantGuru/sandfox.git"
_gitname="sandfox"

build() {
    cd "$srcdir"
    msg "Connecting to GIT server...."

    if [ -d $_gitname ] ; then
        cd $_gitname && git pull origin master
        msg "The local files are updated."
    else
        git clone --depth 1 -b master $_gitroot $_gitname
    fi

    msg "GIT checkout done or server timeout"
    msg "Starting make..."

    rm -rf "$srcdir/$_gitname-build"
    rm -rf "$srcdir/$_gitname/.git/shallow"
    git clone "$srcdir/$_gitname" "$srcdir/$_gitname-build"
    cd "$srcdir/$_gitname-build"

	install -Dm755 "$pkgname" "$pkgdir/usr/bin/$pkgname"
    echo
}

